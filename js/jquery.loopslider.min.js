/**
 * LoopSlider
 * @version 0.2
 * @author Pavel Khoroshkov aka pgood
 * @link https://github.com/pgooood/loopslider
 */
!function(e){e.fn.loopslider=function(t){(t=e.extend({htmlSliderWraper:'<div class="loopslider"></div>',htmlSliderBody:'<div class="loopslider-body"></div>',htmlItemWraper:'<div class="loopslider-item-wraper"></div>',htmlPaginationContainer:'<div class="loopslider-pagination"></div>',htmlPaginationItem:"<div></div>",visibleItems:3,slideDuration:400,easing:"swing",responsive:!1,touchSupport:!0,autoplay:!1,stopOnHover:!1,autoplayInterval:3e3,fullscreen:!1,parallax:null,prevButton:null,nextButton:null,stopButton:null,playButton:null,gap:0,step:1,pagination:!1,navigation:!1,onStop:null,onPlay:null,onMove:null},t)).gap=parseInt(t.gap),t.gap=!isNaN(t.gap)&&t.gap>0?t.gap:0,t.visibleItems=t.visibleItems>0?parseInt(t.visibleItems):1,t.step=parseInt(t.step),t.step=isNaN(t.step)||t.step<1?1:t.step>t.visibleItems?t.visibleItems:t.step,t.parallax&&("object"!=typeof t.parallax?t.parallax={e:">*",index:1}:(t.parallax.e||(t.parallax.e=">*"),isNaN(parseFloat(t.parallax.index))&&(t.parallax=null)));var n,i=[];function a(t,n){e("#loopslider-sprite").length||e("body").get(0).insertAdjacentHTML("afterbegin",'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="loopslider-sprite" style="display:none"><symbol id="loopslider-prev-icon" viewBox="0 0 50 50"><path d="M27.3 34.7L17.6 25l9.7-9.7 1.4 1.4-8.3 8.3 8.3 8.3z"/></symbol><symbol id="loopslider-next-icon" viewBox="0 0 50 50"><path d="M22.7 34.7l-1.4-1.4 8.3-8.3-8.3-8.3 1.4-1.4 9.7 9.7z"/></symbol></svg>');var i=window.location.pathname+window.location.search+"#loopslider-"+t+"-icon";return $e=e('<div class="loopslider-nav-button loopslider-'+t+'-button"></div>'),$e.appendTo(n).get(0).insertAdjacentHTML("afterbegin",'<svg><use xlink:href="'+i+'"/></svg>'),$e}function o(e){e.$pagination&&(e.$pagination.removeClass("loopslider-active"),e.$pagination.eq(Math.round(e.currentIndex()/t.visibleItems)).addClass("loopslider-active"))}function s(a){return a=a||t.step,e(i).each(function(){var i,s=this;if(s.enabled&&!s.motion){p(),s.motion=!0;for(var l=0;l<a;l++)e(s.arInvisible.pop()).prependTo(s.$e);s.$e.css("left",(s.itemWidth+t.gap)*-a),s.$e.animate({left:0},t.slideDuration,t.easing,function(){for(var e=0;e<a;e++)i=s.$items(),s.arInvisible.unshift(i.get(i.length-1)),i.eq(i.length-1).detach();s.motion=!1,o(s),n&&r(),"function"==typeof t.onMove&&t.onMove(s.currentIndex(),s.$currentItem().find(">*:first-child"),"backward")})}}),!1}function l(a){return a=a||t.step,e(i).each(function(){var i,s=this;if(s.enabled&&!s.motion){p(),s.motion=!0;for(var l=0;l<a;l++)e(s.arInvisible.shift()).appendTo(s.$e);s.$e.animate({left:(s.itemWidth+t.gap)*-a},t.slideDuration,t.easing,function(){for(var e=0;e<a;e++)i=s.$items(),s.arInvisible.push(i.get(0)),i.eq(0).detach();s.$e.css("left",0),s.motion=!1,o(s),n&&r(),"function"==typeof t.onMove&&t.onMove(s.currentIndex(),s.$currentItem().find(">*:first-child"),"forward")})}}),!1}function r(){p(),e(i).each(function(){this.enabled&&t.autoplayInterval>t.slideDuration&&(this.autoplayIntervalId=window.setInterval(function(){l()},t.autoplayInterval))})}function p(){e(i).each(function(){this.autoplayIntervalId&&(window.clearInterval(this.autoplayIntervalId),this.autoplayIntervalId=null)})}function d(){r(),n=!0,"function"==typeof t.onPlay&&t.onPlay()}function c(){if(p(),e(i).each(function(){this.$e.stop(!0,!0)}),t.responsive){var d=parseInt(e(window).width()),c=Number.MAX_SAFE_INTEGER;for(var u in t.responsive)parseInt(u)>=d&&parseInt(u)<parseInt(c)&&(c=u);t.responsive[c]&&e.extend(t,t.responsive[c])}e(i).each(function(n){!function(n,i){var a=e(window),o=n.$e.parent().width();n.itemWidth=(o-t.gap*(t.visibleItems-1))/t.visibleItems,n.arInvisible&&n.arInvisible.length&&n.$e.append(n.arInvisible),n.arInvisible=[];var s=n.$items();if(s.css({"margin-right":((t.gap>0?100*t.gap/o:0)/10).toFixed(3)+"%",width:(100*n.itemWidth/o/10).toFixed(3)+"%"}),(n.enabled=n.length>t.visibleItems)&&(s.each(function(e,i){e>=t.visibleItems&&n.arInvisible.push(i)}),e(n.arInvisible).detach()),t.fullscreen){var l=function(e){n.$e.parent().height(a.height())};l(),a.off("resize.loopslider").on("resize.loopslider",l),n.$e.parent().addClass("loopslider-fullscreen")}t.parallax&&a.off("scroll.loopslider"+i).on("scroll.loopslider"+i,function(){var i=e(window).scrollTop(),a=n.$items(),o=a.offset().top,s=function(){var n=e(this).find(t.parallax.e);n.css("background-position-y",(i-o)*t.parallax.index),n.addClass("loopslider-parallax-container")};a.each(s),e(n.arInvisible).each(s)})}(this,n)}),t.navigation&&e(i).each(function(){var e=this,t=e.$e.find("img"),n=function(){var t=e.$e.parent().height()/2;e.prevButton.css("top",t-e.prevButton.height()/2),e.nextButton.css("top",t-e.nextButton.height()/2)};e.prevButton||(e.prevButton=a("prev",e.$e.parent()).click(function(){s()})),this.nextButton||(this.nextButton=a("next",e.$e.parent()).click(function(){l()})),n(),t.on("load",n)}),t.pagination&&e(i).each(function(){var n=Math.ceil(this.length/t.visibleItems),a=e(t.htmlPaginationContainer),r=a.hasClass("loopslider-pagination")?a:a.find(".loopslider-pagination");if(this.$pagination&&this.$pagination.parent().remove(),!this.enabled)return!0;for(var p=0;p<n;p++)e(t.htmlPaginationItem).appendTo(r).addClass("loopslider-page-nav-item").click(function(n){return function(){var a;a=n*t.visibleItems,a=parseInt(a),isNaN(a)||e(i).each(function(){var e=this.$currentItem().data("index"),t=a-e,n=this.length-e+a,i=this.length-a+e;if(a>=this.length||a==e)return!0;Math.abs(t)<n&&Math.abs(t)<i?t>0?l(t):s(Math.abs(t)):n<i?l(n):s(i)})}}(p));a.insertAfter(this.$e.parent()),this.$pagination=a.find(".loopslider-page-nav-item"),o(this)}),n&&r()}e(this).each(function(){var n,a;i.push((n=e(this),a={$e:e(t.htmlSliderBody).appendTo(e(t.htmlSliderWraper).width("100%")).width("1000%"),$items:function(){return this.$e.find(">*")},$currentItem:function(){return this.$e.find(">*:first-child")},currentIndex:function(){return this.$currentItem().data("index")}},n.find(">*").each(function(n){e(t.htmlItemWraper).append(this).appendTo(a.$e).data("index",n)}),n.append(a.$e.parent()),a.length=a.$items().length,a))}),c(),e(window).resize(c),e(t.nextButton).click(function(){return l(),!1}),e(t.prevButton).click(function(){return s(),!1}),e(t.playButton).click(function(){return d(),!1}),e(t.stopButton).click(function(){return p(),n=!1,"function"==typeof t.onStop()&&t.onStop(),!1}),t.touchSupport&&e(i).each(function(){var e,t,n,i=this.$e.get(0);i.addEventListener&&(i.addEventListener("touchstart",function(i){var a=i.changedTouches[0];e=a.pageX,t=a.pageY,n=(new Date).getTime()},!1),i.addEventListener("touchend",function(i){var a=i.changedTouches[0],o=(new Date).getTime()-n,r=Math.abs(a.pageX-e);1e3>=o&&r>=100&&r>=Math.abs(a.pageY-t)&&(a.pageX-e>0?s():l())},!1))}),t.autoplay&&d(),t.stopOnHover&&(e(this).mouseenter(function(){n&&p()}),e(this).mouseleave(function(){n&&r()}))}}(jQuery);